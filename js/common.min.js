function loadMusic(){$("#music-content")&&$("#music-content").append('<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=450 src="http://music.163.com/outchain/player?type=0&id=49176408&auto=0&height=430"></iframe>')}function toggleMusicPanel(){$("#music-control").toggleClass("on"),isFirstToggleMusic&&(_gaq.push(["_trackEvent","ToggleMusic","InRecent",window.location.pathname]),isFirstToggleMusic=!1)}function processPageView(e){void 0!==e&&$(".post-block").each(function(){var i=$(this).children("h2").children("a").attr("href");if(i){i=i.slice("http://zhangwenli.com".length);for(var o=e.length,n=0,t=0;o>t;++t){var s=e[t][0],a=s.indexOf("?"),c=a>=0?s.slice(0,a):s;(s===i||c===i||c===i+"index.html"||i===c+"index.html")&&(n+=parseInt(e[t][1]))}$(this).hasClass("cn")?$(this).append('<div class="view-cnt">（'+n+" 人已阅）</div>"):$(this).append('<div class="view-cnt">('+n+" viewed)</div>")}})}setTimeout(loadMusic,2e4);var isFirstToggleMusic=!0;if(LazyLoad.css("/blog/css/font.css"),LazyLoad.js("https://cdn.jsdelivr.net/jquery/1.11.3/jquery.min.js",function(){$("h1").each(function(){if(0===$(this).children(".h1-link").length){var e=$(this).text().replace(/\ /g,"-").replace(/\W^\-/g,"").toLowerCase();""!==e&&$(this).attr("id",e).append(' <a class="h1-link" href="#'+e+'">#</a>')}}),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)===!1&&LazyLoad.js("/blog/js/jquery.timeago.min.js",function(){$(".timeago").timeago().show()}),LazyLoad.js("/blog/js/unviel.min.js",function(){$("img").unveil(),setTimeout(function(){$.ajax({url:"https://ovilia-blog-1234.appspot.com/query?id=ahJzfm92aWxpYS1ibG9nLTEyMzRyFQsSCEFwaVF1ZXJ5GICAgIC6qI4KDA",dataType:"jsonp",timeout:3e3,success:function(e){processPageView(e.rows)},error:function(){console.log("Failed to get page view from GAE!"),$.ajax({url:"/blog/pageview.json",dataType:"json",success:function(e){console.log("Local page view used."),processPageView(e.rows)}})}})},2e3)}),$(document.links).filter(function(){return this.hostname!==window.location.hostname}).attr("target","_blank"),"function"==typeof jQueryCallBack&&jQueryCallBack()}),setTimeout(function(){LazyLoad.css("/blog/css/emojify.min.css",function(){LazyLoad.js("/blog/js/emojify.min.js",function(){emojify.setConfig({emoticons_enabled:!0,people_enabled:!0,nature_enabled:!0}),emojify.run()})})},5e3),"object"==typeof loadJs)for(var i=0,len=loadJs.length;len>i;++i)LazyLoad.js(loadJs[i][0],loadJs[i][1]);